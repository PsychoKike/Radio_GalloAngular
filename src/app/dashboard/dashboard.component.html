<div class="console-wrapper">
  <div class="console-header">
    <h2>ğŸ›ï¸ RadioGallo - Cabina de Control</h2>
    <div class="live-indicator" [class.on-air]="isTransmitting">
      {{ isTransmitting ? 'ğŸ”´ EN VIVO' : 'âšª OFF AIR' }}
    </div>
  </div>

  <div class="control-section">
    <label>ğŸ™ï¸ MicrÃ³fono</label>
    <select [(ngModel)]="selectedMicId" (change)="onMicChange()">
    @for (device of availableMics; track device.deviceId) {
    <option [value]="device.deviceId">
        {{ device.label || 'MicrÃ³fono GenÃ©rico' }}
    </option>
    }
    </select>
    @if (micActive) {
    <small class="active-text">Mic listo</small>
    } @else {
    <small>Selecciona mic</small>
    }

  </div>

  <div class="control-section">
    <label>ğŸµ MÃºsica (Apps)</label>
    <button class="spotify-btn" (click)="openAppSelector()">
      Seleccionar Ventana / PestaÃ±a
    </button>
    <small [class.active-text]="musicActive">
      {{ musicActive ? 'âœ… Audio RecibiÃ©ndose' : 'âš ï¸ Sin audio' }}
    </small>
  </div>

  <div class="meter-section">
    <label>Nivel de Salida</label>
    <div class="meter-box">
      <div class="meter-bar" 
           [style.width.%]="volumeLevel"
           [class.clipping]="volumeLevel > 90">
      </div>
    </div>
  </div>

  <button class="transmit-btn" 
          (click)="toggleTransmission()" 
          [class.stop-btn]="isTransmitting"
          [disabled]="!micActive && !musicActive">
    {{ isTransmitting ? 'DETENER TRANSMISIÃ“N' : 'INICIAR TRANSMISIÃ“N' }}
  </button>
</div>